#!/bin/bash

# Database Setup Script Template
# Copy this file to setup_database.sh and configure with your settings
# setup_database.sh is gitignored to keep credentials secure

# Database configuration
DB_USER="your_db_user"
DB_PASSWORD="your_db_password"
DB_NAME="health"

echo "Setting up database: $DB_NAME"

# Create database and tables
mysql -u "$DB_USER" -p"$DB_PASSWORD" < create_db.sql

# Insert test users (credentials kept out of version control)
# Password hashes generated with bcrypt (salt rounds = 10)
# Replace these with your own test account credentials
# Example: use online bcrypt generator or Node.js bcrypt.hash()

mysql -u "$DB_USER" -p"$DB_PASSWORD" "$DB_NAME" <<EOF
-- Insert test users for marking/demonstration
-- Replace username, password hash, and email with your test accounts
INSERT INTO users (username, password, email, first_name, last_name, is_admin) VALUES
('test_user', '\$2b\$10\$YOUR_PASSWORD_HASH_HERE', 'user@example.com', 'Test', 'User', FALSE),
('test_admin', '\$2b\$10\$YOUR_ADMIN_PASSWORD_HASH_HERE', 'admin@example.com', 'Test', 'Admin', TRUE);
EOF

# Insert sample data
mysql -u "$DB_USER" -p"$DB_PASSWORD" < insert_test_data.sql

echo "Database setup complete!"
echo "Remember to update test account credentials in this script before use"
