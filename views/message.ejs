<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title || 'Message' %> - Health & Fitness Tracker
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <% if (redirectUrl && redirectDelay) { %>
        <meta http-equiv="refresh" content="<%= redirectDelay %>; url=<%= redirectUrl %>">
        <% } %>
</head>

<body>
    <%- include('partials/header') %>

        <main>
            <div class="container">
                <div class="message-container">
                    <% if (messageType==='error' ) { %>
                        <div class="alert alert-error">
                            <h2>
                                <%= messageTitle || 'Error' %>
                            </h2>
                            <p>
                                <%= message %>
                            </p>
                        </div>
                        <% } else if (messageType==='warning' ) { %>
                            <div class="alert alert-warning">
                                <h2>
                                    <%= messageTitle || 'Warning' %>
                                </h2>
                                <p>
                                    <%= message %>
                                </p>
                            </div>
                            <% } else if (messageType==='info' ) { %>
                                <div class="alert alert-info">
                                    <h2>
                                        <%= messageTitle || 'Information' %>
                                    </h2>
                                    <p>
                                        <%= message %>
                                    </p>
                                </div>
                                <% } else { %>
                                    <div class="alert alert-success">
                                        <h2>
                                            <%= messageTitle || 'Success' %>
                                        </h2>
                                        <p>
                                            <%= message %>
                                        </p>
                                    </div>
                                    <% } %>

                                        <% if (redirectUrl) { %>
                                            <p class="redirect-message">
                                                <% if (redirectDelay> 0) { %>
                                                    Redirecting in <span id="countdown">
                                                        <%= redirectDelay %>
                                                    </span> seconds...
                                                    <% } %>
                                            </p>
                                            <p>
                                                <a href="<%= redirectUrl %>" class="btn btn-primary">Click here if not
                                                    redirected</a>
                                            </p>
                                            <% } else { %>
                                                <p>
                                                    <a href="/" class="btn btn-primary">Return to Home</a>
                                                </p>
                                                <% } %>
                </div>
            </div>
        </main>

        <%- include('partials/footer') %>

            <% if (redirectUrl && redirectDelay> 0) { %>
                <script>
                    let countdown = <%= redirectDelay %>;
                    const countdownElement = document.getElementById('countdown');

                    const timer = setInterval(() => {
                        countdown--;
                        if (countdownElement) {
                            countdownElement.textContent = countdown;
                        }
                        if (countdown <= 0) {
                            clearInterval(timer);
                        }
                    }, 1000);
                </script>
                <% } %>
</body>

</html>